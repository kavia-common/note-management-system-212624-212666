{"is_source_file": true, "format": "Python", "description": "Script to initialize and set up a local SQLite database for the notes management system, creating base tables, applying migrations, and saving connection info.", "external_files": ["migrations/001_create_notes.sql"], "external_methods": ["sqlite3.connect", "os.makedirs", "os.path.exists", "open", "os.getcwd", "os.path.abspath"], "published": ["DB_NAME", "DB_USER", "DB_PASSWORD", "DB_PORT"], "classes": [], "methods": [{"name": "main", "description": "Main execution flow for database initialization and setup."}], "calls": ["sqlite3.connect", "os.makedirs", "os.path.exists", "close", "cursor.execute", "conn.executescript", "open", "os.getcwd", "os.path.abspath"], "search-terms": ["init_db", "sqlite", "migration", "database setup", "notes table", "migrations/001_create_notes.sql"], "state": 2, "file_id": 3, "knowledge_revision": 22, "git_revision": "a22fe2ddb63c241c3934cae7cf2854486354aeda", "revision_history": [{"18": "1e40c7e3749b7ed6f08e0c1be58fc1036e7e6f75"}, {"22": "a22fe2ddb63c241c3934cae7cf2854486354aeda"}], "ctags": [{"_type": "tag", "name": "DB_NAME", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_NAME = \"myapp.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_PASSWORD", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_PASSWORD = \"kaviadefaultpassword\"  # Not used for SQLite, but kept for consistency$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_PORT", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_PORT = \"5000\"  # Not used for SQLite, but kept for consistency$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_USER", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_USER = \"kaviasqlite\"  # Not used for SQLite, but kept for consistency$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MIGRATIONS_DIR", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^MIGRATIONS_DIR = \"migrations\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "NOTES_MIGRATION_FILE", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^NOTES_MIGRATION_FILE = os.path.join(MIGRATIONS_DIR, \"001_create_notes.sql\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "connection_string", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^connection_string = f\"sqlite:\\/\\/\\/{current_dir}\\/{DB_NAME}\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "created_notes", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^                created_notes = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "created_notes", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^        created_notes = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "current_dir", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^current_dir = os.getcwd()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "db_exists", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^db_exists = os.path.exists(DB_NAME)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "db_path", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^db_path = os.path.abspath(DB_NAME)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "migration_sql", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^                    migration_sql = f.read()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "notes_exists", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^        notes_exists = cursor.fetchone() is not None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "record_count", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^            record_count = 0$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "record_count", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^            record_count = cursor.fetchone()[0] or 0$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status_parts", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^status_parts = []$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "table_count", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^        table_count = cursor.fetchone()[0] or 0$/", "language": "Python", "kind": "variable"}], "hash": "12a3a93eb95894df7b4850aa48a17e71", "format-version": 4, "code-base-name": "notes_database", "filename": "notes_database/init_db.py", "fields": [{"name": "DB_NAME = \"myapp.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_PASSWORD = \"kaviadefaultpassword\"  # Not used for SQLite, but kept for consistency", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_PORT = \"5000\"  # Not used for SQLite, but kept for consistency", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_USER = \"kaviasqlite\"  # Not used for SQLite, but kept for consistency", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MIGRATIONS_DIR = \"migrations\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "NOTES_MIGRATION_FILE = os.path.join(MIGRATIONS_DIR, \"001_create_notes.sql\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "connection_string = f\"sqlite:\\/\\/\\/{current_dir}\\/{DB_NAME}\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_notes = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_notes = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "current_dir = os.getcwd()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "db_exists = os.path.exists(DB_NAME)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "db_path = os.path.abspath(DB_NAME)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "migration_sql = f.read()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "notes_exists = cursor.fetchone() is not None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "record_count = 0", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "record_count = cursor.fetchone()[0] or 0", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "status_parts = []", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "table_count = cursor.fetchone()[0] or 0", "scope": "", "scopeKind": "", "description": "unavailable"}]}