{"is_source_file": true, "format": "Python", "description": "This is a Python script that initializes a SQLite database for the note management system. It sets up core tables like app_info and users, applies a migration to create a notes table if missing, and writes connection info and environment variables files.", "external_files": ["migrations/001_create_notes.sql", "db_connection.txt", "db_visualizer/sqlite.env"], "external_methods": ["os.makedirs", "os.path.exists", "os.path.join", "os.getcwd", "open", "sqlite3.connect"], "published": ["DB_NAME", "DB_USER", "DB_PASSWORD", "DB_PORT", "MIGRATIONS_DIR", "NOTES_MIGRATION_FILE", "connection_string", "status_parts"], "classes": [], "methods": [], "calls": ["os.makedirs", "os.path.exists", "os.path.join", "os.getcwd", "sqlite3.connect", "cursor.execute", "conn.executescript", "open", "f.write", "print"], "search-terms": ["init_db", "SQLite", "migration", "notes_table", "app_info", "connection info", "migrations/001_create_notes.sql"], "state": 2, "file_id": 3, "knowledge_revision": 24, "git_revision": "ad2645fd45ea64248d93f0f73b7a5a1bb3289e8d", "revision_history": [{"18": "1e40c7e3749b7ed6f08e0c1be58fc1036e7e6f75"}, {"22": "a22fe2ddb63c241c3934cae7cf2854486354aeda"}, {"23": "a22fe2ddb63c241c3934cae7cf2854486354aeda"}, {"24": "ad2645fd45ea64248d93f0f73b7a5a1bb3289e8d"}], "ctags": [{"_type": "tag", "name": "DB_NAME", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_NAME = \"myapp.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_PASSWORD", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_PASSWORD = \"kaviadefaultpassword\"  # Not used for SQLite, but kept for consistency$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_PORT", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_PORT = \"5000\"  # Not used for SQLite, but kept for consistency$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_USER", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^DB_USER = \"kaviasqlite\"  # Not used for SQLite, but kept for consistency$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "MIGRATIONS_DIR", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^MIGRATIONS_DIR = \"migrations\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "NOTES_MIGRATION_FILE", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^NOTES_MIGRATION_FILE = os.path.join(MIGRATIONS_DIR, \"001_create_notes.sql\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "connection_string", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^connection_string = f\"sqlite:\\/\\/\\/{current_dir}\\/{DB_NAME}\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "created_notes", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^                    created_notes = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "created_notes", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^            created_notes = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "current_dir", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^current_dir = os.getcwd()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "db_exists", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^db_exists = os.path.exists(DB_NAME)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "db_path", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^db_path = os.path.abspath(DB_NAME)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "migration_sql", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^                        migration_sql = f.read()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "notes_exists", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^            notes_exists = cursor.fetchone() is not None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "record_count", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^                record_count = 0$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "record_count", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^                record_count = cursor.fetchone()[0] or 0$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status_parts", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^status_parts = []$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "table_count", "path": "/home/kavia/workspace/code-generation/note-management-system-212624-212666/notes_database/init_db.py", "pattern": "/^            table_count = cursor.fetchone()[0] or 0$/", "language": "Python", "kind": "variable"}], "hash": "4e7b1a92907aec8e2bf66b62c121e2eb", "format-version": 4, "code-base-name": "notes_database", "filename": "notes_database/init_db.py", "fields": [{"name": "DB_NAME = \"myapp.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_PASSWORD = \"kaviadefaultpassword\"  # Not used for SQLite, but kept for consistency", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_PORT = \"5000\"  # Not used for SQLite, but kept for consistency", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_USER = \"kaviasqlite\"  # Not used for SQLite, but kept for consistency", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "MIGRATIONS_DIR = \"migrations\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "NOTES_MIGRATION_FILE = os.path.join(MIGRATIONS_DIR, \"001_create_notes.sql\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "connection_string = f\"sqlite:\\/\\/\\/{current_dir}\\/{DB_NAME}\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_notes = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "created_notes = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "current_dir = os.getcwd()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "db_exists = os.path.exists(DB_NAME)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "db_path = os.path.abspath(DB_NAME)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "migration_sql = f.read()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "notes_exists = cursor.fetchone() is not None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "record_count = 0", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "record_count = cursor.fetchone()[0] or 0", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "status_parts = []", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "table_count = cursor.fetchone()[0] or 0", "scope": "", "scopeKind": "", "description": "unavailable"}]}